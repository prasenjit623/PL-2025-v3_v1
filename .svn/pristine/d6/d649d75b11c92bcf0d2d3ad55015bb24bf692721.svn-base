package model.AM;

import java.sql.CallableStatement;
import java.sql.SQLException;
import java.sql.Types;

import model.AM.common.WoInv_AM;

import oracle.jbo.JboException;
import oracle.jbo.server.ApplicationModuleImpl;
import oracle.jbo.server.ViewLinkImpl;
import oracle.jbo.server.ViewObjectImpl;
// ---------------------------------------------------------------------
// ---    File generated by Oracle ADF Business Components Design Time.
// ---    Mon Nov 15 18:54:21 IST 2021
// ---    Custom code may be added to this class.
// ---    Warning: Do not modify method signatures of generated methods.
// ---------------------------------------------------------------------
public class WoInv_AMImpl extends ApplicationModuleImpl implements WoInv_AM {
    /**
     * This is the default constructor (do not remove).
     */
    public WoInv_AMImpl() {
    }

    /**
     * Container's getter for WoInvHdr_VO1.
     * @return WoInvHdr_VO1
     */
    public ViewObjectImpl getWoInvHdr_VO1() {
        return (ViewObjectImpl)findViewObject("WoInvHdr_VO1");
    }

    /**
     * Container's getter for SearchWoInv_RoVo1.
     * @return SearchWoInv_RoVo1
     */
    public ViewObjectImpl getSearchWoInv_RoVo1() {
        return (ViewObjectImpl)findViewObject("SearchWoInv_RoVo1");
    }

    /**
     * Container's getter for WoInvDtls_RoVo1.
     * @return WoInvDtls_RoVo1
     */
    public ViewObjectImpl getWoInvDtls_RoVo1() {
        return (ViewObjectImpl)findViewObject("WoInvDtls_RoVo1");
    }

    /**
     * Container's getter for getFunctionCodeROVO1.
     * @return getFunctionCodeROVO1
     */
    public ViewObjectImpl getgetFunctionCodeROVO1() {
        return (ViewObjectImpl)findViewObject("getFunctionCodeROVO1");
    }

    /**
     * Container's getter for getARSetupDetails_ROVO1.
     * @return getARSetupDetails_ROVO1
     */
    public ViewObjectImpl getgetARSetupDetails_ROVO1() {
        return (ViewObjectImpl)findViewObject("getARSetupDetails_ROVO1");
    }

    /**
     * Container's getter for WoInvDetailAr_VO1.
     * @return WoInvDetailAr_VO1
     */
    public ViewObjectImpl getWoInvDetailAr_VO1() {
        return (ViewObjectImpl)findViewObject("WoInvDetailAr_VO1");
    }

    /**
     * Container's getter for WoInvHdr_WoInvDtl_VL1.
     * @return WoInvHdr_WoInvDtl_VL1
     */
    public ViewLinkImpl getWoInvHdr_WoInvDtl_VL1() {
        return (ViewLinkImpl)findViewLink("WoInvHdr_WoInvDtl_VL1");
    }

    /**
     * Container's getter for WoInvHdr_WoInvDetailAr_VL1.
     * @return WoInvHdr_WoInvDetailAr_VL1
     */
    public ViewLinkImpl getWoInvHdr_WoInvDetailAr_VL1() {
        return (ViewLinkImpl)findViewLink("WoInvHdr_WoInvDetailAr_VL1");
    }
    
    public String createWoArLines(String wo_inv_hdr_id,String material_cost,String resource_cost,String user_name)
    {
        String flag="null";
        CallableStatement cs=this.getDBTransaction().createCallableStatement("{call WO_INV_PKG.WO_CREATE_AR_LINES(?,?,?,?,?,?)}",1);
        try {
            cs.setString(1,wo_inv_hdr_id);
            cs.setString(2,material_cost);
            cs.setString(3,resource_cost);
            cs.setString(4,user_name);
            cs.registerOutParameter(5,Types.VARCHAR);
            cs.registerOutParameter(6,Types.VARCHAR);
            cs.execute();
       
          flag=cs.getString(6).toString();
        } catch (SQLException e) {
        }
        return flag;
    }
    //auto call wo pkg
    public String callAutoWoInv(String frmDate,String tooDate)
    {
        String flag="null";
        CallableStatement cs=this.getDBTransaction().createCallableStatement("{call WO_INV_PKG.AUTO_CREATE_INV_WO(?,?,?,?)}",1);
        try {
            cs.setString(1,frmDate);
            cs.setString(2,tooDate);
            cs.registerOutParameter(3,Types.VARCHAR);
            cs.registerOutParameter(4,Types.VARCHAR);
            cs.execute();
       
          flag=cs.getString(4).toString();
        } catch (SQLException e) {
        }
        return flag;
    }
    public String getARInvoiceTrxDetailsWoInv(String pWoInvNum,
                                         String pCustomerTrxId,
                                         String pCustomerTrxNo) {
        System.out.println("pWoInvNum==impl="+pWoInvNum);
        System.out.println("pCustomerTrxId==impl="+pCustomerTrxId);
        System.out.println("pCustomerTrxNo==impl="+pCustomerTrxNo);
        java.math.BigDecimal customerTrxId =
            new java.math.BigDecimal(pCustomerTrxId);
        java.math.BigDecimal customerTrxNo =
            new java.math.BigDecimal(pCustomerTrxNo);
        Object woInvNo = pWoInvNum;
        String stmt =
            "begin xxpm_util_package.update_customer_trx_id_wo_inv (?,?,?); end;";
        CallableStatement cst = null;
        try {
            cst = this.getDBTransaction().createCallableStatement(stmt, 0);
            cst.setObject("p_wo_inv_hdr_num", woInvNo);
            cst.setObject("p_customer_trx_id", customerTrxId);
            cst.setObject("p_trx_number", customerTrxNo);
            cst.executeUpdate();
            return "S";
        } catch (SQLException e) {
            System.err.println("ERROR" + e);
            throw new JboException(e.getMessage());
        } finally {
            if (cst != null) {
                try {
                    cst.close();
                } catch (SQLException e) {
                    return "E";
                }
            }
        }
    }
    /**
     * Container's getter for GetWoHdrInfo_ROVO1.
     * @return GetWoHdrInfo_ROVO1
     */
    public ViewObjectImpl getGetWoHdrInfo_ROVO1() {
        return (ViewObjectImpl)findViewObject("GetWoHdrInfo_ROVO1");
    }

    /**
     * Container's getter for WoHeader_VO1.
     * @return WoHeader_VO1
     */
    public ViewObjectImpl getWoHeader_VO1() {
        return (ViewObjectImpl)findViewObject("WoHeader_VO1");
    }

    /**
     * Container's getter for OpResourceStg_VO1.
     * @return OpResourceStg_VO1
     */
    public ViewObjectImpl getOpResourceStg_VO1() {
        return (ViewObjectImpl)findViewObject("OpResourceStg_VO1");
    }

    /**
     * Container's getter for PoInvHdr_VO1.
     * @return PoInvHdr_VO1
     */
    public ViewObjectImpl getPoInvHdr_VO1() {
        return (ViewObjectImpl)findViewObject("PoInvHdr_VO1");
    }

    /**
     * Container's getter for SearchPoInv_RoVo1.
     * @return SearchPoInv_RoVo1
     */
    public ViewObjectImpl getSearchPoInv_RoVo1() {
        return (ViewObjectImpl)findViewObject("SearchPoInv_RoVo1");
    }

    /**
     * Container's getter for PoInvDtls_RoVo1.
     * @return PoInvDtls_RoVo1
     */
    public ViewObjectImpl getPoInvDtls_RoVo1() {
        return (ViewObjectImpl)findViewObject("PoInvDtls_RoVo1");
    }

    /**
     * Container's getter for PoInvHdr_PoInvDtl_VL1.
     * @return PoInvHdr_PoInvDtl_VL1
     */
    public ViewLinkImpl getPoInvHdr_PoInvDtl_VL1() {
        return (ViewLinkImpl)findViewLink("PoInvHdr_PoInvDtl_VL1");
    }
}
